<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Administrador</title>
    <link rel="stylesheet" href="styles/login.css" />
    <script src="vistaWeb.js"></script>
  </head>
  <body>
    <div class="login-container">
      <div class="login-card">
        <div class="login-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"
            />
          </svg>
        </div>

        <h1>Ingreso a la aplicación</h1>
        <p class="subtitle">
          Por favor ingrese con su cédula de identidad y contraseña.
        </p>

        <form id="formLogin">
          <div class="form-group">
            <label for="cedula">Cédula de identidad</label>
            <input
              type="text"
              id="cedula"
              name="cedula"
              placeholder="Ej: 41234567"
              required
            />
            <small>Solo números, sin puntos ni guiones.</small>
          </div>

          <div class="form-group">
            <label for="password">Contraseña</label>
            <input
              type="password"
              id="password"
              name="password"
              placeholder="Ingrese su contraseña"
              required
            />
          </div>

          <button type="submit" class="btn-login">Ingresar</button>

          <div id="errorMessage"></div>
        </form>

        <div class="footer">© 2025 – Acceso de administradores</div>
      </div>
    </div>

    <script src="utilesVista.js"></script>
    <script>
      function mostrar_Login_Exitoso(destino) {
        window.location.href = destino;
      }

      function mostrar_Login_Fallido(mensaje) {
        document.getElementById("errorMessage").innerHTML =
          '<div class="error-message">Usuario o contraseña incorrectos</div>';
      }

      function excepcionDeAplicacion(mensaje) {
        document.getElementById("errorMessage").innerHTML =
          '<div class="error-message">' + mensaje + "</div>";
      }

      document
        .getElementById("formLogin")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const cedula = document.getElementById("cedula").value;
          const password = document.getElementById("password").value;

          if (!cedula || !password) {
            document.getElementById("errorMessage").innerHTML =
              '<div class="error-message">Debe completar todos los campos</div>';
            return;
          }

          const params =
            "cedula=" +
            encodeURIComponent(cedula) +
            "&password=" +
            encodeURIComponent(password);

          submit("/acceso/admin/login", params);
        });
    </script>
  </body>
</html>
